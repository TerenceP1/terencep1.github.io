<html>
  <head>
    <title>The AES Machine</title>
  </head>
  <body>
    <script>
      let nkey;
      let worker=new Worker("/crypto/aes/aes.js");
    </script>
    <h1>Welcome to the AES machine!</h1>
    <label>Key: </label>
    <input id="key" type="text">
    <br>
    <button onclick="nkey=new Uint8Array(32);
      crypto.getRandomValues(nkey);
      document.getElementById('key').value='';
      for (let i=0;i<32;i++){
        document.getElementById('key').value+=('00'+nkey[i].toString(16)).slice(-2);
      }
      ">Generate random key</button>
    <br>
    <label>Secret message:</label>
    <textarea id="plaintext"></textarea>
    <br>
    <label>Encrypted message:</label>
    <textarea id="cyphered"></textarea>
    <script>
      // Text will be interpreted as UTF16.
      // Cyphertext layout:
      // First byte: length of padding
      // Rest of data: hexadecimal form of output arrays merged together
      let plain=document.getElementById("plaintext");
      let cy=document.getElementById("cyphered");
    </script>
  </body>
</html>
